import pandas as pd
import matplotlib.pyplot as plt
from sklearn.linear_model import LinearRegression

# Load data
data = pd.read_csv("/content/city_day.csv")

# Drop rows with NaN values in 'PM2.5' column
data.dropna(subset=['PM2.5'], inplace=True)

# Convert date to index
data["day"] = range(len(data))

X = data[["day"]]
y = data["PM2.5"]

# Train model
model = LinearRegression()
model.fit(X, y)

# Predict next 3 days
future_days = [[len(data)], [len(data)+1], [len(data)+2]]
predictions = model.predict(future_days)

# Plot AQI trend
plt.figure()
plt.plot(data["day"], y, marker='o', label="Past AQI")
plt.plot(
    [len(data), len(data)+1, len(data)+2],
    predictions,
    marker='x',
    linestyle='--',
    label="Predicted AQI"
)
plt.xlabel("Days")
plt.ylabel("AQI")
plt.title("AQI Prediction Trend")
plt.legend()
plt.show()

print("Predicted AQI for next days:", predictions)